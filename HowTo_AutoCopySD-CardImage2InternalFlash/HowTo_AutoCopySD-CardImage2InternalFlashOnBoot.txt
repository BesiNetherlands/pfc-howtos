-----------------------------------------------------------------------------------------
--- HowTo: Automatically copy SD-Card image into Internal-Flash on boot  
-----------------------------------------------------------------------------------------
Ref: WAGO-PFC-BSP-2017.7.1                                               FW: 02.07.07(10)

This HowTo show a way to automaticaly update/overwrite PFC firmware in "internal flash",
without usage of additional tools other then just an SD-Card.

The base is the System5-Init-Script "cpsd2intern", shipped with every firmware since FW08.
The script checks actual boot location, In case booted from "SD-Card", the standard copy
script is used to update internal flash with firmware on SD-Card.

The standard copy script "/etc/config-tools/copy_firmware_image" also used by:
- "Web-Based-Management(WBM)" and
- "WAGO-Console-Based-Management-Tool(cbm)".

Progress of firmware update displayed via LED's U1 to U4
- YELLOW: Copy process is active(approx. 1 minute)
- GREEN: Successful done!
- RED: Finished with ERROR!

You can run script at any time also by hand.
    >/etc/init.d/cpsd2intern start

To enable the "On-Power-On" feature, create a sym-link in auto-start-folder "/etc/rc.d".
You have the choice between creating sym-link by hand:
        > cd /etc/rc.d
        > ln -s ../init.d/cpsd2intern S95_cpsd2intern

Alternatively let the script do this job for you:
    >/etc/init.d/cpsd2intern makelink

Both commands create the symbolic link "/etc/rc.d/S95_cpsd2intern".
With "S95_" copy process started automatically on boot before CoDeSys runtime(plclinux_rt).

The symbolic link in /etc/rc.d/ get automatically removed on first boot from internal flash.

REMARK:
Not all settings, such as "Owner of Serial-Interface(ttyO0)" shipped with firmware
image on SD-Card. ttyO0-Ownership stored inside electronic-type-label(EEPROM) on device.


\eof
